<script>
    // Function to sync Comentario's theme with PaperMod's theme
    function syncComentarioTheme() {
        const comentario = document.querySelector('comentario-comments');
        if (comentario) {
            // Check if PaperMod's dark mode is active by looking for the 'dark' class on the body
            const isDark = document.body.classList.contains('dark');
            const theme = isDark ? 'dark' : 'light';

            // Set the 'theme' attribute on the Comentario component
            comentario.setAttribute('theme', theme);
        }
    }

    // Run the function once on initial page load
    document.addEventListener('DOMContentLoaded', function() {
        // A small delay might be needed to ensure the Comentario component is ready
        setTimeout(syncComentarioTheme, 200);
    });

    // Use a MutationObserver to watch for changes in the <body> class attribute
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.attributeName === 'class') {
                syncComentarioTheme();
            }
        });
    });

    // Start observing the body for attribute changes
    observer.observe(document.body, {
        attributes: true
    });
</script>